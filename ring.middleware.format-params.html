<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>ring.middleware.format-params documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Ring-middleware-format 0.5.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ring</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></div></li><li class="depth-3 branch"><a href="ring.middleware.format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format</span></div></a></li><li class="depth-3 branch current"><a href="ring.middleware.format-params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format-params</span></div></a></li><li class="depth-3"><a href="ring.middleware.format-response.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format-response</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="ring.middleware.format-params.html#var-available-charsets"><div class="inner"><span>available-charsets</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-default-handle-error"><div class="inner"><span>default-handle-error</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-get-or-guess-charset"><div class="inner"><span>get-or-guess-charset</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-make-type-request-pred"><div class="inner"><span>make-type-request-pred</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-parse-clojure-string"><div class="inner"><span>parse-clojure-string</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-wrap-clojure-params"><div class="inner"><span>wrap-clojure-params</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-wrap-format-params"><div class="inner"><span>wrap-format-params</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-wrap-json-kw-params"><div class="inner"><span>wrap-json-kw-params</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-wrap-json-params"><div class="inner"><span>wrap-json-params</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-wrap-restful-params"><div class="inner"><span>wrap-restful-params</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-wrap-transit-json-params"><div class="inner"><span>wrap-transit-json-params</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-wrap-transit-msgpack-params"><div class="inner"><span>wrap-transit-msgpack-params</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-wrap-yaml-kw-params"><div class="inner"><span>wrap-yaml-kw-params</span></div></a></li><li class="depth-1"><a href="ring.middleware.format-params.html#var-wrap-yaml-params"><div class="inner"><span>wrap-yaml-params</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">ring.middleware.format-params</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-available-charsets"><h3>available-charsets</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Set of recognised charsets by the current JVM</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L13">view source</a></div></div><div class="public anchor" id="var-default-handle-error"><h3>default-handle-error</h3><div class="usage"><code>(default-handle-error e _ _)</code></div><div class="doc"><div class="markdown"><p>Default error handling function used, which rethrows the Exception</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L72">view source</a></div></div><div class="public anchor" id="var-get-or-guess-charset"><h3>get-or-guess-charset</h3><div class="usage"><code>(get-or-guess-charset req)</code></div><div class="doc"><div class="markdown"><p>Tries to get the request encoding from the header or guess it if not given in <em>Content-Type</em>. Defaults to <em>utf-8</em></p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L34">view source</a></div></div><div class="public anchor" id="var-make-type-request-pred"><h3>make-type-request-pred</h3><div class="usage"><code>(make-type-request-pred regexp)</code></div><div class="doc"><div class="markdown"><p>Function that returns a predicate fn checking if <em>Content-Type</em> request header matches a specified regexp and body is set.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L49">view source</a></div></div><div class="public anchor" id="var-parse-clojure-string"><h3>parse-clojure-string</h3><div class="usage"><code>(parse-clojure-string s)</code></div><div class="doc"><div class="markdown"><p>Decode a clojure body. The body is merged into the params, so must be a map or a vector of key value pairs. An empty body is safely handled.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L178">view source</a></div></div><div class="public anchor" id="var-wrap-clojure-params"><h3>wrap-clojure-params</h3><div class="usage"><code>(wrap-clojure-params handler &amp; {:keys [predicate decoder charset handle-error], :or {predicate clojure-request?, decoder parse-clojure-string, charset get-or-guess-charset, handle-error default-handle-error}})</code></div><div class="doc"><div class="markdown"><p>Handles body params in Clojure (*edn*) format. See <a href="ring.middleware.format-params.html#var-wrap-format-params">wrap-format-params</a> for details.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L188">view source</a></div></div><div class="public anchor" id="var-wrap-format-params"><h3>wrap-format-params</h3><div class="usage"><code>(wrap-format-params handler &amp; {:keys [predicate decoder charset handle-error binary?]})</code></div><div class="doc"><div class="markdown"><p>Wraps a handler such that requests body are deserialized from to  the right format, added in a <em>:body-params</em> key and merged in <em>:params</em>.  It takes 4 args:</p>
<ul>
  <li><strong>:predicate</strong> is a predicate taking the request as sole argument to  test if deserialization should be used.</li>
  <li><strong>:decoder</strong> specifies a fn taking the body String as sole argument and  giving back a hash-map.</li>
  <li><strong>:charset</strong> can be either a string representing a valid charset or a fn  taking the req as argument and returning a valid charset.</li>
  <li><strong>:binary?</strong> if true <em>:charset</em> will be ignored and decoder will receive  an <em>InputStream</em></li>
  <li><strong>:handle-error</strong> is a fn with a sig [exception handler request].  Return (handler obj) to continue executing a modified  request or directly a map to answer immediately. Defaults  to just rethrowing the Exception</li>
</ul></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L77">view source</a></div></div><div class="public anchor" id="var-wrap-json-kw-params"><h3>wrap-json-kw-params</h3><div class="usage"><code>(wrap-json-kw-params handler &amp; {:keys [predicate decoder charset handle-error], :or {predicate json-request?, decoder json/parse-string, charset get-or-guess-charset, handle-error default-handle-error}})</code></div><div class="doc"><div class="markdown"><p>Handles body params in JSON format. Parses map keys as keywords. See <a href="ring.middleware.format-params.html#var-wrap-format-params">wrap-format-params</a> for details.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L133">view source</a></div></div><div class="public anchor" id="var-wrap-json-params"><h3>wrap-json-params</h3><div class="usage"><code>(wrap-json-params handler &amp; {:keys [predicate decoder charset handle-error], :or {predicate json-request?, decoder json/parse-string, charset get-or-guess-charset, handle-error default-handle-error}})</code></div><div class="doc"><div class="markdown"><p>Handles body params in JSON format. See <a href="ring.middleware.format-params.html#var-wrap-format-params">wrap-format-params</a> for details.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L120">view source</a></div></div><div class="public anchor" id="var-wrap-restful-params"><h3>wrap-restful-params</h3><div class="usage"><code>(wrap-restful-params handler &amp; {:keys [handle-error formats], :or {handle-error default-handle-error, formats [:json :edn :yaml :transit-msgpack :transit-json]}})</code></div><div class="doc"><div class="markdown"><p>Wrapper that tries to do the right thing with the request :body and provide a solid basis for a RESTful API. It will deserialize to <em>JSON</em>, <em>YAML</em>, <em>Transit</em> or <em>Clojure</em> depending on Content-Type header. See <a href="ring.middleware.format-params.html#var-wrap-format-params">wrap-format-params</a> for more details.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L253">view source</a></div></div><div class="public anchor" id="var-wrap-transit-json-params"><h3>wrap-transit-json-params</h3><div class="usage"><code>(wrap-transit-json-params handler &amp; {:keys [predicate decoder charset binary? handle-error options], :or {predicate transit-json-request?, options {}, decoder (make-transit-decoder :json options), binary? true, handle-error default-handle-error}})</code></div><div class="doc"><div class="markdown"><p>Handles body params in transit format over <strong>JSON</strong>. You can use an <em>:options</em> key to pass a map with <em>:handlers</em> and <em>:default-handler</em> to transit-clj. See <a href="ring.middleware.format-params.html#var-wrap-format-params">wrap-format-params</a> for details.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L210">view source</a></div></div><div class="public anchor" id="var-wrap-transit-msgpack-params"><h3>wrap-transit-msgpack-params</h3><div class="usage"><code>(wrap-transit-msgpack-params handler &amp; {:keys [predicate decoder charset binary? handle-error options], :or {predicate transit-msgpack-request?, options {}, decoder (make-transit-decoder :msgpack options), binary? true, handle-error default-handle-error}})</code></div><div class="doc"><div class="markdown"><p>Handles body params in transit format over <strong>msgpack</strong>. You can use an <em>:options</em> key to pass a map with <em>:handlers</em> and <em>:default-handler</em> to transit-clj. See <a href="ring.middleware.format-params.html#var-wrap-format-params">wrap-format-params</a> for details.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L229">view source</a></div></div><div class="public anchor" id="var-wrap-yaml-kw-params"><h3>wrap-yaml-kw-params</h3><div class="usage"><code>(wrap-yaml-kw-params handler &amp; {:keys [predicate decoder charset handle-error], :or {predicate yaml-request?, decoder yaml/parse-string, charset get-or-guess-charset, handle-error default-handle-error}})</code></div><div class="doc"><div class="markdown"><p>Handles body params in YAML format. Parses map keys as keywords. See <a href="ring.middleware.format-params.html#var-wrap-format-params">wrap-format-params</a> for details.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L163">view source</a></div></div><div class="public anchor" id="var-wrap-yaml-params"><h3>wrap-yaml-params</h3><div class="usage"><code>(wrap-yaml-params handler &amp; {:keys [predicate decoder charset handle-error], :or {predicate yaml-request?, decoder yaml/parse-string, charset get-or-guess-charset, handle-error default-handle-error}})</code></div><div class="doc"><div class="markdown"><p>Handles body params in YAML format. See <a href="ring.middleware.format-params.html#var-wrap-format-params">wrap-format-params</a> for details.</p></div></div><div class="src-link"><a href="http://github.com/metosin/ring-middleware-format/blob/master/src/ring/middleware/format_params.clj#L150">view source</a></div></div></div></body></html>